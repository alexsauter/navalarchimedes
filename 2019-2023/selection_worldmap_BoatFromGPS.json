[{"id":"800cc58c.5c8af8","type":"function","z":"4bf1080e.71c7b8","name":"Place boat/update position of boat","func":"//msg.payload is expected to contain msg.payload.lat and msg.payload.lon\n// lat and lon are expected to arrive in a degrees*1E7 format (see line 19 & 20)\nvar gpsdata = msg.payload;\n//Select an id for the boat\nvar id = 1;\n\n//Delete msg.payload -> preparing msg for worldmaps-node\ndelete msg.payload;\nmsg.payload = {};\n\n//Delete old position of given boat\nmsg.payload.layer = \"Archimedes\";\nmsg.payload.name = \"Boat \" + id;\nmsg.payload.deleted = true;\nnode.send(msg);\nmsg.payload.deleted = undefined;\n\n//Place at new position\nmsg.payload.lat = gpsdata.lat*1E-7;\nmsg.payload.lon = gpsdata.lon*1E-7;\nmsg.payload.id = id;\nmsg.payload.icon = \"ship\";\nmsg.payload.iconColor = \"grey\";\nmsg.payload.ttl = 5;    //Make boat disappear after 5 seconds withouth new update\n//If available, add heading and speed to boat:\nmsg.payload.bearing = flow.get(\"heading\")||0;\nmsg.payload.speed = flow.get(\"groundspeed\")||0;\nmsg.payload.time = flow.get(\"time\")||Date.now();\n\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":400,"wires":[["46d0ccb4.c6bce4"]]},{"id":"46d0ccb4.c6bce4","type":"worldmap","z":"4bf1080e.71c7b8","name":"","lat":"60.394195","lon":"5.262922","zoom":"17","layer":"OSM","cluster":"","maxage":"","usermenu":"show","layers":"show","panit":"false","panlock":"false","zoomlock":"false","hiderightclick":"false","coords":"none","showgrid":"false","path":"/worldmap","x":1170,"y":400,"wires":[]}]